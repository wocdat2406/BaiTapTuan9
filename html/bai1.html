<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/bootstrap.css">
    <script src="../js/jquery-3.7.1.min.js"></script>
    <script src="../js/bootstrap.js"></script>
</head>
<body>
    <div class="container">
        <div class="row justify-content-center align-items-center g-2">
            <div class="col-12 border border-1">
                <img src="../img/website.png" class="w-100" alt="">
            </div>
        </div>

        <div class="row justify-content-center align-items-center g-2">
            <div class="col-12 border border-1">
                <ul class="nav justify-content-left">
                    <li class="nav-item"><a class="nav-link" aria-current="page" href="#">Trang chủ</a></li>
                    
                    <li class="nav-item">
                        <!-- data-bs-toggle="modal": Bootstrap gắn cho nó chức năng mở modal. -->
                        <!-- data-bs-target="#modalId": Chỉ định ID của modal cần mở. -->
                        <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#modalID">Đăng ký</a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="row justify-content-center align-items-center g-2">
            <div class="col-12 border border-1">
                <h2 class="text-center">LIST OF MEMBER</h2>
                <div class="table-responsive">
                    <table class="table table-primary" id="tblds">
                        <thead>
                            <tr>
                                <th scope="col">STT</th>
                                <th scope="col">Họ tên</th>
                                <th scope="col">Giới tính</th>
                                <th scope="col">Ngôn ngữ</th>
                                <th scope="col">Số điện thoại</th>
                                <th scope="col">Ngày sinh</th>
                                <th scope="col">Địa chỉ</th>
                                <th scope="col">Khóa học</th>
                                <th scope="col">Học phí</th>
                            </tr>
                        </thead>
                        <tbody>
                            
                        </tbody>
                    </table>
                </div>
                
            </div>
        </div>
    </div>

    <!-- Modal Body-->
    <!-- 

        fade: hiệu ứng mờ mờ khi mở/đóng modal. 
        id="modalId": rất quan trọng. Đây chính là ID mà button/anchor bên ngoài trỏ tới bằng data-bs-target="#modalId". Phải trùng. 
        role="dialog": thuộc tính trợ năng (accessibility), báo đây là hộp thoại.
        aria-labelledby="modalTitleId": nói rằng tiêu đề của modal nằm ở phần tử có id là modalTitleId (ở dưới có).
        aria-hidden="true": lúc đầu modal ẩn. 

        modal-dialog: để định dạng khung chính của hộp thoại
        role="document": cho screen reader biết đây là nội dung chính của hộp thoại.

        HEADER
        h5.modal-title: tiêu đề, id = modalTitleId → trùng với aria-labelledby ở ngoài → đúng chuẩn.
        class="btn-close": nút dấu X kiểu Bootstrap.
        data-bs-dismiss="modal": rất quan trọng → nhấn vào là Bootstrap tự ẩn modal, không cần JS.
        aria-label="Close": để screen reader đọc được.

        BODY
        container-fluid là class sẵn có của Bootstrap dùng để bao nội dung chiếm toàn bộ chiều rộng.
        col-form-label: giúp label căn giữa theo chiều dọc và thẳng hàng với ô nhập trong form dạng lưới (grid).
        onblur="ktraten();": khi người dùng rời khỏi ô nhập (mất focus), hàm ktraten() sẽ được gọi để kiểm tra hoặc xử lý dữ liệu ô đó.

        form-select: áp dụng kiểu Bootstrap cho thẻ <select> — thêm viền, bo góc, padding, và chiều rộng 100%.
        form-select-lg: đặt kích thước lớn hơn mặc định (tăng chiều cao và font chữ).       
    -->
    <div class="modal fade" id="modalID" tabindex="-1" role="dialog" aria-labelledby="modalTitleId" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <!-- Header -->
                <div class="modal-header">
                    <h5 class="modal-title" id="modalTitleId">THÔNG TIN HỌC VIÊN</h5>
                    <span id="thongbao"></span>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <!-- Body -->
                <div class="modal-body">
                    <div class="container-fluid">
                        <div class="container">
                            <form>
                                <div class="mb-3 row">
                                    <label class="col-4 col-form-label">Họ và tên</label>
                                    <div class="col-8">
                                        <input type="text" name="txtht" id="txtht" class="form-control" onblur="ktraten();">
                                        <span id="err1" class="text-danger">*</span>
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-4 col-form-label">Gioi tinh</label>
                                    <div class="col-8">
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="gioitinh" id="" value="Nam" />
                                            <label class="form-check-label">Nam</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="gioitinh" id="" value="Nữ" />
                                            <label class="form-check-label">Nu</label>
                                        </div>


                                    </div>
                                </div> 

                                <div class="mb-3 row">
                                    <label class="col-4 col-form-label">Số điện thoại</label>
                                    <div class="col-8">
                                        <input type="text" class="form-control" name="txtsdt" id="txtsdt" onblur="ktradt();">
                                        <span id="err2" class="text-danger">*</span>
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-4 col-form-label">Ngày sinh</label>
                                    <div class="col-8">
                                        <input type="date" name="txtns" id="txtns" class="form-control">
                                        <span id="err3" class="text-danger">*</span>
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-4 col-form-label">Địa chỉ</label>
                                    <div class="col-8">
                                        <input type="text" name="txtdc" id="txtdc" class="form-control">
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-4 col-form-label">Bạn muốn tham gia khóa nào?</label>
                                    <div class="col-8 mb-3">
                                        <select class="form-select" name="" id="listkh" onchange="Chonkh()">
                                            <option value="5,000,000">2 tuần</option>
                                            <option value="8,000,000">4 tuần</option>
                                            <option value="9,000,000">6 tuần</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-4 col-form-label">Học phí</label>
                                    <div class="col-8">
                                        <input type="text" name="txthp" id="txthp" class="form-control" readonly>
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <label class="col-4 col-form-label">Ảnh đại diện</label>
                                    <div class="col-8">
                                        <input type="file" name="txtadc" id="txtadc" class="form-control">
                                        <span id="err4" class="text-danger">*</span>
                                    </div>
                                </div>

                                <div class="mb-3 row">
                                    <!-- d-grid: chuyển phần tử sang chế độ hiển thị dạng lưới (grid layout) để dễ sắp xếp và căn chỉnh các phần tử con. -->
                                    <div class="col-12 d-grid">
                                        <button type="button" class="btn btn-success" onclick="Luu()" data-bs-dismiss="modal">
                                            Lưu
                                        </button>
                                    </div>
                                </div>
                                <div class="row"></div>
                                <div class="row"></div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        /*
            ^ : Bắt đầu chuỗi (không cho ký tự trước đó).

            [A-Z]{1} : Ký tự đầu tiên phải là chữ cái in hoa (A–Z).

            [a-z]+ : Sau đó là ít nhất 1 chữ thường (a–z).
            => tức là tạo thành một từ kiểu: Nguyen, Tran, An, ...

            (\s[A-Z]{1}[a-z]+)* : Cả cụm này là phần lặp lại (0 hoặc nhiều lần) cho các từ tiếp theo.

                \s : một khoảng trắng (space).
                [A-Z]{1} : từ tiếp theo cũng bắt đầu bằng chữ in hoa.
                [a-z]+: theo sau là ít nhất 1 chữ thường.
                * ở ngoài ngoặc: cho phép có hoặc không có từ tiếp theo.
                => nghĩa là bạn có thể nhập: Nguyen Van A (nhiều từ, mỗi từ viết hoa đầu).

            $ : Kết thúc chuỗi (không cho ký tự thừa ở cuối).
        */
        function ktraten(){
            var ht=document.getElementById("txtht").value;
            var ten=/^[A-Z]{1}[a-z]+(\s[A-Z]{1}[a-z]+)*$/;
            if(ten.test(ht)){
                document.getElementById("err1").innerHTML="*";
                return true;
            }
            else{
                document.getElementById("err1").innerHTML="phai nhap đúng mẫu: Nguyen Thi Hue";
                return false;
            }
        }

        function ktradt(){
            var sdt=document.getElementById("txtsdt").value;
            // \d: số nào cũng được
            var dt=/^0[2-9]{1}\d{8}$/;  
            if(dt.test(sdt)){
                document.getElementById("err2").innerHTML="*"
                return true;
            }else{
                document.getElementById("err2").innerHTML="nhap đúng mẫu: 0xxxxxxxxx"
                return false;
            }
        }

        var i = 1;
        function Luu() {
            if(!ktraten()||!ktradt()){
                document.getElementById("thongbao").innerHTML="nhap đầy đủ thông tin"
                return false
            }

            var ht, sdt, gt, dc, ns, kh, hp;
            var nn = new Array(); // nhieu ngon ngu: Array

            // ho ten: textbox
            ht = document.getElementById("txtht").value;

            //gioitinh : radio 
            // duyệt radio  lấy value
            var rad = document.querySelectorAll("input[type='radio']");
            rad.forEach(function(ch) {
                if (ch.checked) {
                    gt = ch.value; // radio
                }
            })

            // ngon ngữ: checkbox --> lấy value
            // duyệt checkbox

            var chk = document.querySelectorAll("input[type='checkbox']");
            chk.forEach(function(ch) {
                if (ch.checked) {
                    nn.push(ch.value);
                }
            })


            // so dien thoai: textbox
            sdt = document.getElementById("txtsdt").value;
            //ngay sinh : date
            ns = document.getElementById("txtns").value;
            // dia chi : textbox
            dc = document.getElementById("txtdc").value;

            // hocphi: textbox  -- > value cua option select listkh
            hp = document.getElementById("listkh").value;

            // hp = document.getElementById("txthp").value;

            // khoa hoc: select : text cua option
            // lay text cua option select listkh
            var sel = document.getElementById("listkh");
            var kh = sel.options[sel.selectedIndex].text;

            //luu bang
            // có bảng --> tạo row insertRow() --> tạo cột: insertCell()
            var tbl = document.getElementById("tblds");

            // tạo row
            var row1 = tbl.insertRow(i);

            var cot1 = row1.insertCell(0);
            var cot2 = row1.insertCell(1);
            var cot3 = row1.insertCell(2);
            var cot4 = row1.insertCell(3); // ngon ngu checkbox


            var cot5 = row1.insertCell(4);
            var cot6 = row1.insertCell(5);
            var cot7 = row1.insertCell(6);
            var cot8 = row1.insertCell(7);
            var cot9 = row1.insertCell(8);



            cot1.innerHTML = i;
            cot2.innerHTML = ht;
            cot3.innerHTML = gt;
            cot4.innerHTML = nn;
            cot5.innerHTML = sdt;
            cot6.innerHTML = ns;
            cot7.innerHTML = dc;
            cot8.innerHTML = kh;
            cot9.innerHTML = hp;







            i++;

        }

        function Chonkh() {
            // alert("BBB");

            // lay value cau listkh --> xuat ra txthp
            var hp = document.getElementById("listkh").value;
            document.getElementById("txthp").value = hp;

        }
    </script>
</body>
</html>